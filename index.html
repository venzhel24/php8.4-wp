<!DOCTYPE html>
<html lang="en">
<head>
    <title>PHP 8.4 Overview</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/rndphp/styles/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>
<body class="shower list">

<section class="slide preview">
    <div class="lines"></div>
    <div class="stripes"></div>
    <h1>PHP 8.4 –û–±–∑–æ—Ä</h1>
    <p>–ö–æ—á–µ—Ç–æ–≤ –î–∞–Ω–∏–∏–ª</p>
</section>

<section class="slide">
    <h2>–û —á–µ–º –ø–æ–≥–æ–≤–æ—Ä–∏–º?</h2>
    <ul>
        <li class="next">–ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</li>
        <li class="next">–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</li>
        <li class="next">–ü–µ—Ä–µ—Ö–æ–¥</li>
        <li class="next">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li>
    </ul>
</section>

<section class="slide">
    <h2 class="shout shrink">–ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</h2>
</section>

<section class="slide">
    <h2>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –≤—ã–∑–æ–≤–∞ <code>new</code></h2>
    <div class="image-container">
    <pre><code class="language-php">
        // –°—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å (—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏):
        $area = (new Rectangle(5, 10))->calculateArea();

        // –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –≤ PHP 8.4:
        $area = new Rectangle(5, 10)->calculateArea();
    </code></pre>

        <img class="next" src="pictures/eleph.jpg" alt="1" />
    </div>
</section>

<section class="slide">
    <h2>–•—É–∫–∏ —Å–≤–æ–π—Å—Ç–≤</h2>
    <div class="image-container">
    <pre style="font-size: 10px;"><code>
                class Person
                {
                    public string $fullName {
                        get => $this->firstName . ' ' . $this->lastName;
                    }

                    public string $firstName {
                        set => mb_ucfirst(strtolower($value));
                    }

                    public string $lastName {
                        set {
                            if (strlen($value) < 2) {
                                throw new \InvalidArgumentException('–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞—è —Ñ–∞–º–∏–ª–∏—è');
                            }

                            $this->lastName = $value;
                        }
                    }
                }
    </code></pre>

        <pre><code>
            $p = new Person();
            $p->firstName = '–ø—ë—Ç—Ä';
            echo $p->firstName; // –í—ã–≤–µ–¥–µ—Ç "–ü—ë—Ç—Ä"

            $p->lastName = '–ü–µ—Ç—Ä–æ–≤';
            echo $p->fullName; // –í—ã–≤–µ–¥–µ—Ç "–ü—ë—Ç—Ä –ü–µ—Ç—Ä–æ–≤"
    </code></pre>
    </div>
</section>

<section class="slide">
    <h2>–ê—Å—Å–∏–º–µ—Ç—Ä–∏—á–Ω—ã–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞</h2>
    <pre><code>
                class Software
                {
                    public private(set) string $version = '8.4';
                }

                $software = new Software();

                echo $software->version;  // –í—ã–≤–µ–¥–µ—Ç "8.4"

                // $software->version = '8.5';  // –û—à–∏–±–∫–∞: –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
    </code></pre>
</section>

<section class="slide">
    <h2>–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤ –∏ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ <br>–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –¥–æ—Å—Ç—É–ø–∞</h2>
    <pre><code>
            class Person
            {
                private(set) string $name
                {
                    get => ucfirst(strtolower(trim($this->name)));
                }
            }
    </code></pre>
</section>

<section class="slide">
    <h2>–ê—Å—Å–∏–º–µ—Ç—Ä–∏—á–Ω—ã–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞</h2>
    <ul>
        <li><b>public private(set)</b> // –ú–æ–∂–Ω–æ</li>
        <li><b>public protected(set)</b> // –ú–æ–∂–Ω–æ</li>
        <li><b>protected private(set)</b> // –ú–æ–∂–Ω–æ</li>
        <li><b>protected public(set)</b> // –ù–µ–ª—å–∑—è</li>
        <li><b>private public(set)</b> // –ù–µ–ª—å–∑—è</li>
        <li><b>private protected(set)</b> // –ù–µ–ª—å–∑—è</li>
    </ul>
</section>

<section class="slide">
    <h2 class="shout shrink">–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏</h2>
</section>

<section class="slide">
    <h2>array_find()</h2>
    <p>–§—É–Ω–∫—Ü–∏—è <code>array_find()</code> –Ω–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é.</p>
    <pre><code>
            $numbers = [1, 2, 3, 4, 5];
            $found = array_find($numbers, fn($n) => $n > 3);
            echo $found; // 4
    </code></pre>
</section>

<section class="slide">
    <h2>array_find_key()</h2>
    <p>–§—É–Ω–∫—Ü–∏—è <code>array_find_key()</code> –Ω–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π –∫–ª—é—á –º–∞—Å—Å–∏–≤–∞, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é.</p>
    <pre><code>
            $numbers = ['a' => 1, 'b' => 2, 'c' => 3];
            $key = array_find_key($numbers, fn($n) => $n === 2);
            echo $key; // 'b'
    </code></pre>
</section>

<section class="slide">
    <h2>array_find(), return null</h2>
    <p><code>array_find()</code>, <code>array_find_key()</code> .–ß—Ç–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —ç–ª–µ–º–µ–Ω—Ç</p>
    <pre><code>
            $numbers = [1, 2, 3, 4, 5];
            $found = array_find($numbers, fn($n) => $n > 5);
            echo $found; // null
    </code></pre>
</section>

<section class="slide">
    <h2>array_any()</h2>
    <p>–§—É–Ω–∫—Ü–∏—è <code>array_any()</code> –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é.</p>
    <pre><code>
            $numbers = [1, 2, 3, 4, 5];
            $exists = array_any($numbers, fn($n) => $n > 3);
            echo $exists ? 'True' : 'False'; // True
    </code></pre>
</section>

<section class="slide">
    <h2>array_all()</h2>
    <p>–§—É–Ω–∫—Ü–∏—è <code>array_all()</code> –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç –ª–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ —É—Å–ª–æ–≤–∏—é.</p>
    <pre><code>
            $numbers = [1, 2, 3, 4, 5];
            $all = array_all($numbers, fn($n) => $n > 0);
            echo $all ? 'True' : 'False'; // True
    </code></pre>
</section>


<section class="slide">
    <h2>–ê—Ç—Ä–∏–±—É—Ç <code>#[Deprecated]</code></h2>
    <pre style="font-size: 12px;"><code>
            #[\Deprecated(message: "use safe_replacement() instead", since: "1.5")]
            function unsafe_function()
            {
               echo "This is unsafe", PHP_EOL;
            }

            unsafe_function();
    </code></pre>
    <pre class="next" style="font-size: 12px;">–†–µ–∑—É–ª—å—Ç–∞—Ç:<code>
            Deprecated: Function unsafe_function() is deprecated since 1.5,
            use safe_replacement() instead in example.php on line 9
            This is unsafe
    </code></pre>
</section>

<section class="slide">
    <h2>–ê—Ç—Ä–∏–±—É—Ç <code>#[Deprecated]</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h2>
    <pre><code>
            class MyClass {
                public string $version = '8.4';

                #[Deprecated("Use NEW_CONST instead")]
                public const OLD_CONST = 1;

                #[Deprecated("Use newMethod() instead")]
                public function oldMethod() {
                    echo "This is an old method.\n";
                }
            }
  </code></pre>
</section>

<section class="slide">
    <h2>ext-Dom, –ö–∞–∫ –±—ã–ª–æ</h2>
    <pre style="font-size: 12px"><code>
        $dom = new DOMDocument();
        $dom->loadHTML(
            <<<'HTML'
                &lt;main&gt;
                    &lt;article&gt;PHP 8.4 is a feature-rich release!&lt;/article&gt;
                    &lt;article class="featured"&gt;PHP 8.4 adds new DOM classes that are spec-compliant, keeping the old ones for.&lt;/article&gt;
                &lt;/main&gt;
            HTML,
            LIBXML_NOERROR,
        );

        $xpath = new DOMXPath($dom);
        $node = $xpath->query(".//main/article[not(following-sibling::*)]")[0];
        $classes = explode(" ", $node->className); // Simplified
        var_dump(in_array("featured", $classes)); // bool(true)
</code></pre>
</section>

<section class="slide">
    <h2>ext-Dom, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
    <pre style="font-size: 12px"><code>
            $dom = Dom\HTMLDocument::createFromString(
            &emsp;&lt;&lt;&lt;'HTML'
                &lt;main&gt;
                    &lt;article&gt;PHP 8.4 is a feature-rich release!&lt;/article&gt;
                    &lt;article class="featured"&gt;PHP 8.4 adds new DOM classes that are spec-compliant, keeping the old ones for.&lt;/article&gt;
                &lt;/main&gt;
                HTML,
            LIBXML_NOERROR,
            );

        $node = $dom-&gt;querySelector('main &gt; article:last-child');
        var_dump($node-&gt;classList-&gt;contains("featured")); // bool(true)
</code></pre>
</section>

<section class="slide">
    <h2>–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –¥–ª—è BCMath</h2>
    <div class="image-container">
    <pre style="font-size: 14px"><code>
            $num1 = '0.12345';
            $num2 = 2;
            $result = bcadd($num1, $num2, 5);

            echo $result; // '2.12345'
            var_dump(bccomp($num1, $num2) > 0); // false
</code></pre>

    <pre style="font-size: 14px"><code>
            use BcMath\Number;

            $num1 = new Number('0.12345');
            $num2 = new Number('2');
            $result = $num1 + $num2;

            echo $result; // '2.12345'
            var_dump($num1 > $num2); // false
</code></pre>
    </div>
</section>

<section class="slide">
    <h2>–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤</h2>
    <pre style="font-size: 12px;"><code>
            class Example
            {
                public function __construct(private int $data) {}

                // ...
            }

            $initializer = static function (Example $ghost): void {
                $data = ...; // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

                $ghost->__construct($data); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞
            };

            $reflector = new ReflectionClass(Example::class);
            $object = $reflector->newLazyGhost($initializer);
    </code></pre>
</section>

<section class="slide">
    <h2><code>request_parse_body</code></h2>
    <pre><code>
                [$_POST, $_FILES] = request_parse_body([
                    'post_max_size' => '10M',
                    'upload_max_filesize' => '10M',
                ]);
        </code></pre>
    <p>RequestParseBodyException<br>
        ValueError
    </p>
</section>

<section class="slide">
    <h2><code>grapheme_str_split</code></h2>
    <div style="display: flex; justify-content: space-between;">
        <pre><code>
        $string = "üë®‚Äçüë©‚Äçüëß‚Äçüë¶";

        $array = grapheme_str_split($string);
        print_r($array);

        $array2 = grapheme_str_split($string, 2);
        print_r($array2);
        </code></pre>
        <div class="next" style="word-wrap: break-word; flex: 1; margin-left: 20px;">
            <pre style="font-size: 13px;"><code>
                    Array
                    (
                        [0] => üë®‚Äç
                        [1] => üë©‚Äç
                        [2] => üëß‚Äç
                        [3] => üë¶
                    )
                    Array
                    (
                        [0] => üë®‚Äçüë©‚Äç
                        [1] => üëß‚Äçüë¶
                    )
            </code></pre>
        </div>
    </div>
</section>

<section class="slide">
    <h2 class="shout shrink">–ò–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–º–∞—é—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</h2>
</section>

<section class="slide">
    <h2><code>exit</code> –∏ <code>die</code>: –Ω–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</h2>
    <pre><code>
        declare(strict_types=1);
        exit(3.14);
    </code></pre>

    <p class="next">PHP Fatal error:  Uncaught TypeError: exit(): Argument #1 ($status) must be of type string|int, float given</p>
</section>

<section class="slide">
    <h2>–¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –Ω–µ—è–≤–Ω–æ –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏–µ null –æ–±—ä—è–≤–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏</h2>
    <pre><code>
            function greet(string $name = null): void
            {
                echo "Hello, " . ($name ?? "Guest") . "!\n";
            }

            greet(); // Deprecated: Implicitly allowing null for parameter $name
    </code></pre>
</section>

<section class="slide">
    <h2>–¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –Ω–µ—è–≤–Ω–æ –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏–µ null –æ–±—ä—è–≤–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏</h2>
    <pre><code>
            function greet(?string $name = null): void
            {
                echo "Hello, " . ($name ?? "Guest") . "!\n";
            }

            greet(); // Hello, Guest!
    </code></pre>
</section>

<section class="slide">
    <h2>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ round</h2>
    <pre><code>
            round(1.1, precision: 0, mode: INCORRECT_MODE); // ValueError
            round(1.1, precision: 0, mode: PHP_ROUND_CEILING); // 2
            round(1.1, precision: 1, mode: PHP_ROUND_FLOOR); // -1
            round(1.9, precision: 0, mode: PHP_ROUND_TOWARD_ZERO); // 1
            round(1.9, precision: 0, mode: PHP_ROUND_AWAY_FROM_ZERO); // 2
    </code></pre>
</section>

<section class="slide">
    <h2>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è <code>opcache</code> –∏ <code>JIT</code></h2>
    <span>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ 8.4:</span><br>
    <code>
        opcache.jit_buffer_size=0<br>
        opcache.jit=tracing
    </code>
    <br>
    <br>
    <span>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ 8.4:</span><br>
    <code>
        opcache.jit_buffer_size=64M<br>
        opcache.jit=disable
    </code>
</section>

<section class="slide">
    <h2>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
    <div class="image-container">
        <img src="pictures/2.png" alt="1" />
        <img src="pictures/3.png" alt="2" />
        <img src="pictures/1.png" alt="3" />
        <img src="pictures/4.png" alt="4" />
    </div>
</section>

<section class="slide">
    <h2>–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 8.4, –†–µ–∫—Ç–æ—Ä</h2>
    <pre><code>
            $rectorConfig->rules([
                ExplicitNullableParamTypeRector::class,
                RoundingModeEnumRector::class
            ]);
    </code>
    </pre>
</section>

<section class="slide">
    <h2>–í—ã–≤–æ–¥—ã</h2>
    <table class="table-slide">
        <thead>
        <tr>
            <th>Branch</th>
            <th colspan="2">Initial Release</th>
            <th colspan="2">Active Support Until</th>
            <th colspan="2">Security Support Until</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><a>8.1</a></td>
            <td>25 Nov 2021</td>
            <td><em>3 years, 1 month ago</em></td>
            <td>25 Nov 2023</td>
            <td><em>1 year, 1 month ago</em></td>
            <td>31 Dec 2025</td>
            <td><em>in 11 months</em></td>
        </tr>
        <tr>
            <td><a>8.2</a></td>
            <td>8 Dec 2022</td>
            <td><em>2 years, 1 month ago</em></td>
            <td>31 Dec 2024</td>
            <td><em>20 days ago</em></td>
            <td>31 Dec 2026</td>
            <td><em>in 1 year, 11 months</em></td>
        </tr>
        <tr>
            <td><a>8.3</a></td>
            <td>23 Nov 2023</td>
            <td><em>1 year, 1 month ago</em></td>
            <td>31 Dec 2025</td>
            <td><em>in 11 months</em></td>
            <td>31 Dec 2027</td>
            <td><em>in 2 years, 11 months</em></td>
        </tr>
        <tr>
            <td><a>8.4</a></td>
            <td>21 Nov 2024</td>
            <td><em>1 month ago</em></td>
            <td>31 Dec 2026</td>
            <td><em>in 1 year, 11 months</em></td>
            <td>31 Dec 2028</td>
            <td><em>in 3 years, 11 months</em></td>
        </tr>
        <tr>
            <td><a>8.5</a></td>
            <td>20 Nov 2025</td>
            <td><em>in 9 months</em></td>
            <td>31 Dec 2027</td>
            <td><em>in 2 year, 11 months</em></td>
            <td>31 Dec 2029</td>
            <td><em>in 4 years, 11 months</em></td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2 class="shout shrink">–í–æ–ø—Ä–æ—Å—ã</h2>
</section>

<div class="progress"></div>

<script src="shower/shower.min.js"></script>
<!-- Copyright ¬© 3000 Yours Truly, Famous Inc. -->

</body>
</html>